{% extends 'base.html.twig' %}

{% block title %}Hello RegistrationController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1>Hello ! ✅</h1>

    This friendly message is coming from:
    <ul>
        <li>Your controller at <code><a href="{{ '/Users/moussaillon/Desktop/Dossier requesitory symfony/TimeOut/GetTogether/src/Controller/RegistrationController.php'|file_link(0) }}">src/Controller/RegistrationController.php</a></code></li>
        <li>Your template at <code><a href="{{ '/Users/moussaillon/Desktop/Dossier requesitory symfony/TimeOut/GetTogether/templates/registration/index.html.twig'|file_link(0) }}">templates/registration/index.html.twig</a></code></li>
    </ul>
    {{ form_start(registrationForm, {'attr': {'id': 'registrationForm'}}) }}
    {{ form_errors(registrationForm) }}
    <button type="button" class="btn" onclick="validateAndSubmitForm()">Register</button>

    {{ form_end(registrationForm) }}
</div>

<!-- Afficher un message de validation caché -->
<div id="validationMessage" style="display: none; text-align: center; font-weight: bold;">
    Merci d'avoir rempli le formulaire !
</div>

<script>
    function validateAndSubmitForm() {
        // Récupérer les valeurs des champs du formulaire
        var nom = document.getElementById("registration_form_lastname").value;
        var prenom = document.getElementById("registration_form_firstname").value;
        var dateNaissance = document.getElementById("registration_form_dateNaissance").value;
        var email = document.getElementById("registration_form_email").value;
        var password = document.getElementById("registration_form_password").value;

        // Vérifier si les champs sont remplis
        if (nom === "" || prenom === "" || dateNaissance === "" || email === "" || password === "") {
            // Afficher une fenêtre d'alerte si un champ est vide
            window.alert("Veuillez remplir tous les champs du formulaire.");
        } else {
            // Cacher le formulaire
            document.getElementById("registrationForm").style.display = "none";

            // Afficher le message de validation
            document.getElementById("validationMessage").style.display = "block";

            // Redirection vers une autre page après 3 secondes (3000 millisecondes)
            setTimeout(function() {
                window.location.href = "";
            }, 3000); // 3 secondes (3000 millisecondes)
        }
    }
</script>

{% endblock %}
